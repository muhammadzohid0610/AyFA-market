{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import axios from\"axios\";import{API}from\"../hook\";const userSlice=createSlice({name:\"product\",initialState:{data:[],loading:false,error:false,oneData:{},filter:false,maxPrice:[],currentPage:1},reducers:{setMaxPrice:(state,_ref)=>{let{payload}=_ref;state.maxPrice=payload;},setProducts:(state,_ref2)=>{let{payload}=_ref2;state.data=payload;},setProduct:(state,_ref3)=>{let{payload}=_ref3;state.oneData=payload;},setError:(state,_ref4)=>{let{payload}=_ref4;state.error=payload;},setLoading:(state,_ref5)=>{let{payload}=_ref5;state.loading=payload;},setFilter:(state,_ref6)=>{let{payload}=_ref6;state.filter=payload;},addItemLast:(state,_ref7)=>{var _state$data,_state$data$results;let{payload}=_ref7;(_state$data=state.data)===null||_state$data===void 0?void 0:(_state$data$results=_state$data.results)===null||_state$data$results===void 0?void 0:_state$data$results.push(...payload);},setCurrentPage:(state,_ref8)=>{let{payload}=_ref8;state.currentPage=payload;}}});export const{setProducts,setError,setLoading,setProduct,setFilter,setMaxPrice,addItemLast,setCurrentPage}=userSlice.actions;export default userSlice.reducer;export const getProducts=(params,AfterGet)=>{return async dispatch=>{dispatch(setLoading(true));axios.get(\"\".concat(API,\"/product/\").concat(params?params:\"\"),{params:{page_size:12,page:1}}).then(response=>{dispatch(setProducts(response===null||response===void 0?void 0:response.data));AfterGet(response.data);}).catch(error=>{var _error$response;return dispatch(setError(error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data));}).finally(()=>dispatch(setLoading(false)));};};export const getProduct=_ref9=>{let{id}=_ref9;return async dispatch=>{dispatch(setLoading(true));axios.get(\"\".concat(API,\"/product/\").concat(id)).then(response=>{dispatch(setProduct(response.data));}).catch(error=>dispatch(setError(error.response.data))).finally(()=>dispatch(setLoading(null)));};};export const getMaxPrice=()=>{return async dispatch=>{axios.get(\"\".concat(API,\"/product/?ordering=-price\")).then(response=>{var _response$data;dispatch(setMaxPrice(response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.results[0].price));}).catch(error=>dispatch(setError(error.response.data)));};};","map":{"version":3,"names":["createSlice","axios","API","userSlice","name","initialState","data","loading","error","oneData","filter","maxPrice","currentPage","reducers","setMaxPrice","state","_ref","payload","setProducts","_ref2","setProduct","_ref3","setError","_ref4","setLoading","_ref5","setFilter","_ref6","addItemLast","_ref7","_state$data","_state$data$results","results","push","setCurrentPage","_ref8","actions","reducer","getProducts","params","AfterGet","dispatch","get","concat","page_size","page","then","response","catch","_error$response","finally","getProduct","_ref9","id","getMaxPrice","_response$data","price"],"sources":["/Users/muhammad/Downloads/ayfamarket-main/src/store/slices/Product.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport { API } from \"../hook\";\r\n\r\nconst userSlice = createSlice({\r\n  name: \"product\",\r\n  initialState: {\r\n    data: [],\r\n    loading: false,\r\n    error: false,\r\n    oneData: {},\r\n    filter: false,\r\n    maxPrice: [],\r\n    currentPage: 1,\r\n  },\r\n  reducers: {\r\n    setMaxPrice: (state, { payload }) => {\r\n      state.maxPrice = payload;\r\n    },\r\n    setProducts: (state, { payload }) => {\r\n      state.data = payload;\r\n    },\r\n    setProduct: (state, { payload }) => {\r\n      state.oneData = payload;\r\n    },\r\n    setError: (state, { payload }) => {\r\n      state.error = payload;\r\n    },\r\n    setLoading: (state, { payload }) => {\r\n      state.loading = payload;\r\n    },\r\n    setFilter: (state, { payload }) => {\r\n      state.filter = payload;\r\n    },\r\n    addItemLast: (state, { payload }) => {\r\n      state.data?.results?.push(...payload);\r\n    },\r\n    setCurrentPage: (state, { payload }) => {\r\n      state.currentPage = payload;\r\n    },\r\n  },\r\n});\r\nexport const {\r\n  setProducts,\r\n  setError,\r\n  setLoading,\r\n  setProduct,\r\n  setFilter,\r\n  setMaxPrice,\r\n  addItemLast,\r\n  setCurrentPage,\r\n} = userSlice.actions;\r\nexport default userSlice.reducer;\r\n\r\nexport const getProducts = (params, AfterGet) => {\r\n  return async (dispatch) => {\r\n    dispatch(setLoading(true));\r\n    axios\r\n      .get(`${API}/product/${params ? params : \"\"}`, {\r\n        params: { page_size: 12, page: 1 },\r\n      })\r\n      .then((response) => {\r\n        dispatch(setProducts(response?.data));\r\n        AfterGet(response.data);\r\n      })\r\n      .catch((error) => dispatch(setError(error?.response?.data)))\r\n      .finally(() => dispatch(setLoading(false)));\r\n  };\r\n};\r\n\r\nexport const getProduct = ({ id }) => {\r\n  return async (dispatch) => {\r\n    dispatch(setLoading(true));\r\n\r\n    axios\r\n      .get(`${API}/product/${id}`)\r\n      .then((response) => {\r\n        dispatch(setProduct(response.data));\r\n      })\r\n      .catch((error) => dispatch(setError(error.response.data)))\r\n      .finally(() => dispatch(setLoading(null)));\r\n  };\r\n};\r\n\r\nexport const getMaxPrice = () => {\r\n  return async (dispatch) => {\r\n    axios\r\n      .get(`${API}/product/?ordering=-price`)\r\n      .then((response) => {\r\n        dispatch(setMaxPrice(response?.data?.results[0].price));\r\n      })\r\n      .catch((error) => dispatch(setError(error.response.data)));\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}