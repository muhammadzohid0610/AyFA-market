{"ast":null,"code":"var _jsxFileName = \"/Users/muhammad/Documents/GitHub/ayfa-market/src/components/Cards.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Card from \"./Card\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport { addItemLast, getProducts, setError, setLoading, setCurrentPage } from \"../store/slices/Product\";\nimport axios from \"axios\";\nimport { API } from \"../store/hook\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cards = () => {\n  _s();\n  var _product$data, _product$data$results, _data$results;\n  let params = useLocation();\n  const {\n    data,\n    loading\n  } = useSelector(state => state.product);\n  const {\n    product\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n  const [totalCount, settotalCount] = useState(0);\n  const [next, setNext] = useState();\n  const AfterGet = data => {\n    settotalCount(data === null || data === void 0 ? void 0 : data.count);\n    setNext(data === null || data === void 0 ? void 0 : data.next);\n  };\n  const handleNextPage = () => {\n    axios.get(`${API}/product/${params.search ? params.search : \"\"}`, {\n      params: {\n        page_size: 12,\n        page: product.currentPage + 1\n      }\n    }).then(response => {\n      var _response$data;\n      dispatch(addItemLast((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.results));\n      AfterGet(response.data);\n      dispatch(setCurrentPage(product.currentPage + 1));\n    }).catch(error => {\n      var _error$response;\n      return dispatch(setError(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data));\n    }).finally(() => dispatch(setLoading(false)));\n  };\n  useEffect(() => {\n    setCurrentPage(1);\n    dispatch(getProducts(params.search, AfterGet));\n  }, [params]);\n  useEffect(() => {\n    dispatch(getProducts());\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"diiiv relative flex-1\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cards pb-[24px]\",\n      children: product === null || product === void 0 ? void 0 : (_product$data = product.data) === null || _product$data === void 0 ? void 0 : (_product$data$results = _product$data.results) === null || _product$data$results === void 0 ? void 0 : _product$data$results.map(card => /*#__PURE__*/_jsxDEV(Card, {\n        item: card\n      }, card.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), !(data !== null && data !== void 0 && (_data$results = data.results) !== null && _data$results !== void 0 && _data$results.length) && !loading && /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"flex mt-[50px] sm:text-4xl text-2xl text-[#1DBE60] text-center justify-center\",\n      children: \"\\u043D\\u0435\\u0442 \\u0442\\u043E\\u0432\\u0432\\u0430\\u0440\\u043E\\u0432\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"z-10 flex-1 pt-10 flex  justify-center items-center  max-w-[1200px]  mx-auto w-full px-[15px] \",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"w-[100px]\",\n        src: \"https://i.gifer.com/origin/34/34338d26023e5515f6cc8969aa027bca.gif\",\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex pt-[10px] justify-center\",\n      children: next !== null && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleNextPage,\n        className: \"border border-[#1DBE60] px-5 py-2 rounded-[20px] text-[#b2b4bc]\",\n        children: \"\\u043F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0435\\u0449\\u0451\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(Cards, \"x8rlYDwCEMDzYRISHlQvEMYAm10=\", false, function () {\n  return [useLocation, useSelector, useSelector, useDispatch];\n});\n_c = Cards;\nexport default Cards;\nvar _c;\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Card","useDispatch","useSelector","useLocation","addItemLast","getProducts","setError","setLoading","setCurrentPage","axios","API","jsxDEV","_jsxDEV","Cards","_s","_product$data","_product$data$results","_data$results","params","data","loading","state","product","dispatch","totalCount","settotalCount","next","setNext","AfterGet","count","handleNextPage","get","search","page_size","page","currentPage","then","response","_response$data","results","catch","error","_error$response","finally","className","children","map","card","item","id","fileName","_jsxFileName","lineNumber","columnNumber","length","src","alt","onClick","_c","$RefreshReg$"],"sources":["/Users/muhammad/Documents/GitHub/ayfa-market/src/components/Cards.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport {\r\n  addItemLast,\r\n  getProducts,\r\n  setError,\r\n  setLoading,\r\n  setCurrentPage,\r\n} from \"../store/slices/Product\";\r\nimport axios from \"axios\";\r\nimport { API } from \"../store/hook\";\r\n\r\nconst Cards = () => {\r\n  let params = useLocation();\r\n  const { data, loading } = useSelector((state) => state.product);\r\n  const { product } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const [totalCount, settotalCount] = useState(0);\r\n  const [next, setNext] = useState();\r\n  const AfterGet = (data) => {\r\n    settotalCount(data?.count);\r\n    setNext(data?.next);\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    axios\r\n      .get(`${API}/product/${params.search ? params.search : \"\"}`, {\r\n        params: { page_size: 12, page: product.currentPage  + 1},\r\n      })\r\n      .then((response) => {\r\n        dispatch(addItemLast(response.data?.results));\r\n        AfterGet(response.data);\r\n        dispatch(setCurrentPage(product.currentPage + 1));\r\n      })\r\n      .catch((error) => dispatch(setError(error?.response?.data)))\r\n      .finally(() => dispatch(setLoading(false)));\r\n  };\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1)\r\n    dispatch(getProducts(params.search, AfterGet));\r\n  }, [params]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getProducts());\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"diiiv relative flex-1\">\r\n      <div className=\"cards pb-[24px]\">\r\n        {product?.data?.results?.map((card) => (\r\n          <Card item={card} key={card.id} />\r\n        ))}\r\n      </div>\r\n      {!data?.results?.length && !loading && (\r\n        <h1 className=\"flex mt-[50px] sm:text-4xl text-2xl text-[#1DBE60] text-center justify-center\">\r\n          нет товваров\r\n        </h1>\r\n      )}\r\n      {loading ? (\r\n        <div className=\"z-10 flex-1 pt-10 flex  justify-center items-center  max-w-[1200px]  mx-auto w-full px-[15px] \">\r\n          <img\r\n            className=\"w-[100px]\"\r\n            src=\"https://i.gifer.com/origin/34/34338d26023e5515f6cc8969aa027bca.gif\"\r\n            alt=\"\"\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div className=\"flex pt-[10px] justify-center\">\r\n          {next !== null && (\r\n            <button\r\n              onClick={handleNextPage}\r\n              className=\"border border-[#1DBE60] px-5 py-2 rounded-[20px] text-[#b2b4bc]\"\r\n            >\r\n          показать ещё\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cards;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}